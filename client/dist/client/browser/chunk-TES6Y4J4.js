import{A as E,n as U}from"./chunk-35D7H6KK.js";import{Qa as M,R as f,Ta as S,Ua as u,Va as O,Wa as x,Xa as w,Ya as g,Za as y,_a as I,ab as F,ca as C,ea as a,fa as s,gb as k,ha as v,hb as N,ia as c,ja as b,na as n,oa as i,pa as d,ra as m,sa as h,ta as _,va as p,za as P}from"./chunk-AUYOIWGM.js";function R(r,o){if(r&1&&d(0,"img",8),r&2){let e=h();_("src",e.preview,C)}}var D=class r{constructor(o,e,t){this.userService=o;this.store=e;this.router=t}preview;currentFile;post;ngOnInit(){this.post=new w({description:new g("",[u.required]),image:new g(null,u.required)})}get currentUserId(){return this.userService.currentUserId}get image(){return this.post.get("image")}onImageSelected(o){let e=o.target.files?.[0];if(e){this.currentFile=e;let t=new FileReader;t.onload=l=>{this.preview=l.target?.result},t.readAsDataURL(this.currentFile)}this.image?.setValue(e)}upload(){if(this.post.invalid)return;let{description:o}=this.post.value;this.store.dispatch(E({file:this.currentFile,description:o,userId:this.currentUserId})),this.router.navigate(["/posts"])}static \u0275fac=function(e){return new(e||r)(s(N),s(U),s(M))};static \u0275cmp=f({type:r,selectors:[["app-create-post"]],standalone:!0,features:[P],decls:14,vars:3,consts:[[1,"post-container"],[1,"post-form",3,"ngSubmit","formGroup"],[1,"form-group","description"],["formControlName","description","id","description"],[1,"upload-container"],[1,"upload-label"],[1,"upload-text"],["type","file","accept","image",3,"change"],[1,"preview",3,"src"],[1,"post-button"],[3,"disabled"]],template:function(e,t){e&1&&(n(0,"section",0)(1,"form",1),m("ngSubmit",function(){return t.upload()}),n(2,"div",2),d(3,"textarea",3),i(),n(4,"div",4)(5,"label",5)(6,"span",6),p(7,"Click to upload an image"),i(),n(8,"input",7),m("change",function(G){return t.onImageSelected(G)}),i(),v(9,R,1,1,"img",8),i()(),n(10,"div",9)(11,"button",10),p(12,"Post"),i()()()(),p(13," >")),e&2&&(a(),c("formGroup",t.post),a(8),b(t.preview?9:-1),a(2),c("disabled",t.post.invalid))},dependencies:[k,y,S,O,x,I,F],styles:[".post-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:2em}.post-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em;background:#272727;padding:1em;border-radius:2em}.form-group.description[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none;width:100%;height:100px;background:#272727;outline:none;border-radius:1em;padding:1em;color:#fff}.post-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;padding:.5em 1em;border-radius:2em;border:1px solid #fff;color:#fff;cursor:pointer}.post-button[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.post-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#444;cursor:not-allowed}.upload-container[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:0 auto;text-align:center}.upload-label[_ngcontent-%COMP%]{display:inline-block;width:100%;height:200px;border:2px dashed #ccc;border-radius:1em;background:#f0f0f0;color:#777;cursor:pointer;padding:1em}.upload-label[_ngcontent-%COMP%]:hover{background-color:#e0e0e0;border-color:#999}input[type=file][_ngcontent-%COMP%]{display:none}.upload-label[_ngcontent-%COMP%]   .upload-text[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:#555;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.upload-label[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;opacity:.6}.upload-label[_ngcontent-%COMP%]:hover   .preview[_ngcontent-%COMP%]{opacity:1}"]})};export{D as CreatePostComponent};
